<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Reflective Bond · Lumi Studio</title>

    <!-- Google AdSense -->
    <script async 
        src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9188806824600550"
        crossorigin="anonymous">
    </script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <!-- Home Button -->
    <button id="homeBtn" class="home-icon-btn" onclick="returnHome()">
        <span class="home-icon">⌂</span>
    </button>

    <div class="container">
        <div id="errorBar" class="errorBar"></div>

        <!-- LANDING PAGE -->
        <section id="landingPage">
            <h1 class="landingTitle">Reflective Bond</h1>
            <p class="landingSubtitle">
                A gentle space to release what hurts, remember what you appreciate,
                and send a sincere reflection to someone who matters to you.
            </p>

            <div class="landingGeo"></div>

            <div id="languageSelect">
                <button class="langBtn activeLang" data-lang="en" onclick="selectLanguage('en')">EN</button>
                <button class="langBtn" data-lang="zh" onclick="selectLanguage('zh')">中文</button>
                <button class="langBtn" data-lang="ms" onclick="selectLanguage('ms')">BM</button>
            </div>

            <button class="startBtn" onclick="startApp()">Begin Reflection</button>

            <p class="landingNote">
                Nothing you write is stored on a server. Everything stays in your device unless you choose to save it.
            </p>
        </section>

        <!-- FLOW -->
        <section id="flow" style="display:none;">
            <!-- STEP 1 - Sender Info -->
            <div id="userInfoStep" class="flow-step">
                <h2>Before we begin…</h2>
                <p>Your name and today’s date will appear at the end of your reflection.</p>

                <label for="senderName">Your Name</label>
                <input id="senderName" type="text" placeholder="Your name" />

                <label for="reflectionDate">Date</label>
                <input id="reflectionDate" type="date" />

                <button class="startBtn" onclick="goToPersonStep()">Next</button>
            </div>

            <!-- STEP 2 - Recipient -->
            <div id="stepPerson" class="flow-step" style="display:none;">
                <h2>Who are you writing to?</h2>
                <p>Enter the name of the person you’re thinking of.</p>

                <label for="person">Recipient Name</label>
                <input id="person" type="text" placeholder="Their name" />

                <button class="backBtn" onclick="goBackToUserInfo()">Back</button>
                <button class="startBtn" onclick="goToChallengesStep()">Next</button>
            </div>

            <!-- STEP 3 - Vent -->
            <div id="stepChallenges" class="flow-step" style="display:none;">
                <h2>What has been difficult for you?</h2>
                <p>List the things that have been painful or frustrating.</p>

                <p class="sectionNote">You may write just one item. Up to five is ideal.</p>

                <input type="text" id="vent1" class="ventInput" placeholder="Item 1" />
                <input type="text" id="vent2" class="ventInput" placeholder="Item 2" />
                <input type="text" id="vent3" class="ventInput" placeholder="Item 3" />
                <input type="text" id="vent4" class="ventInput" placeholder="Item 4" />
                <input type="text" id="vent5" class="ventInput" placeholder="Item 5" />

                <button class="backBtn" onclick="goBackToPerson()">Back</button>
                <button class="startBtn" onclick="startBreathwork()">Next</button>
            </div>

            <!-- STEP 4 - Breathwork -->
            <div id="breathStep" class="flow-step" style="display:none;">
                <h2>Take a breath with me</h2>
                <p>Follow the orb for a few slow inhales and exhales.</p>

                <div class="breathOrbWrapper">
                    <div class="breathOrb"></div>
                </div>

                <p class="breathCountdownText">Time remaining: <span id="breathCountdown">30</span>s</p>

                <button class="backBtn" onclick="goBackToChallenges()">Back</button>
                <button id="btnBreathNext" class="startBtn" disabled onclick="goToAppreciationsStep()">Continue</button>
            </div>

            <!-- STEP 5 - Appreciation -->
            <div id="stepAppreciations" class="flow-step" style="display:none;">
                <h2>What do you still appreciate?</h2>

                <p class="sectionNote">You may write just one item. Up to five is ideal.</p>

                <input type="text" id="app1" class="appInput" placeholder="Item 1" />
                <input type="text" id="app2" class="appInput" placeholder="Item 2" />
                <input type="text" id="app3" class="appInput" placeholder="Item 3" />
                <input type="text" id="app4" class="appInput" placeholder="Item 4" />
                <input type="text" id="app5" class="appInput" placeholder="Item 5" />

                <button class="backBtn" onclick="goBackToBreath()">Back</button>
                <button class="startBtn" onclick="generateReflection()">Generate Reflection</button>
            </div>

            <!-- STEP 6 - Output Card -->
            <div id="output" style="display:none;">
                <h2>Your Reflection</h2>

                <div id="outputCard">
                    <p>Dear <span id="outputRecipientName"></span>,</p>

                    <p>
                        Before anything else, I want to express this clearly:
                        I would like to apologize for any actions, words, or thoughts that may have caused hurt — whether intentionally or unintentionally.
                    </p>

                    <p>
                        My intention in sharing this reflection is simple: to reconcile where we can, to mend our bond, and to honour the connection we have.
                        From a place of goodwill and loving-kindness, I sincerely wish you well and happy.
                    </p>

                    <p>Today, I took a moment to pause and reflect on what has been sitting in my heart.</p>

                    <p>Here are the things that have been difficult for me:</p>
                    <div id="outputChallenges"></div>

                    <p>And here are the things I genuinely appreciate about you:</p>
                    <div id="outputAppreciations"></div>

                    <div class="healingBlock">
                        <p>May I see clearly.</p>
                        <p>May I soften where I can.</p>
                        <p>May I honour my boundaries.</p>
                        <p>May I act with compassion and truth.</p>
                    </div>

                    <p class="signatureLabel">With reflection,</p>
                    <p id="outputSignature"></p>

                    <div class="deepHealingFinal">
                        <p>I’m sorry.</p>
                        <p>Please forgive me.</p>
                        <p>Thank you.</p>
                        <p>I love you.</p>
                    </div>
                </div>

                <!-- Theme Selector -->
                <div class="themeDropdown">
                    <p>Choose a theme:</p>
                    <div class="themePreviewRow">
                        <div class="themePreview themePreview-lumi" onclick="setTheme('lumi')"></div>
                        <div class="themePreview themePreview-dawn" onclick="setTheme('dawn')"></div>
                        <div class="themePreview themePreview-sand" onclick="setTheme('sand')"></div>
                        <div class="themePreview themePreview-cosmic" onclick="setTheme('cosmic')"></div>
                        <div class="themePreview themePreview-clean" onclick="setTheme('clean')"></div>
                    </div>
                </div>

                <button class="startBtn" onclick="downloadCard()">Download Card (PNG)</button>
                <button class="startBtn" onclick="downloadStoryCard()">Download Story Version</button>

                <button class="backBtn" onclick="goBackToAppreciations()">Edit Reflection</button>
                <button class="startBtn" onclick="returnHome()">Start Over</button>
            </div>
        </section>

        <!-- STATIC PAGES -->
        <section id="termsPage" class="staticPage">
            <h1>Terms of Use</h1>
            <p>Reflective Bond is a contemplative tool...</p>
        </section>

        <section id="privacyPage" class="staticPage">
            <h1>Privacy Policy</h1>
            <p>We do not store your data...</p>
        </section>

        <section id="disclaimerPage" class="staticPage">
            <h1>Disclaimer</h1>
            <p>This is not a medical or psychological service...</p>
        </section>

        <section id="lumiPage" class="staticPage">
            <h1>Lumi Studio</h1>
            <p>A contemporary, secular, universal design studio...</p>
        </section>

        <footer>
            <div class="footerGeo"></div>
            <div class="footerLinks">
                <span onclick="returnHome()">Home</span> |
                <span onclick="openPage('termsPage')">Terms</span> |
                <span onclick="openPage('privacyPage')">Privacy</span> |
                <span onclick="openPage('disclaimerPage')">Disclaimer</span> |
                <span onclick="openPage('lumiPage')">Lumi Studio</span>
            </div>
        </footer>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
